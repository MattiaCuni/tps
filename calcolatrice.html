<!DOCTYPE html>
<html>
<head>
<title>Calcolatrice</title>
<style>
body {
  font-family: Arial;
}

#schermo {
  width: 190px;
  height: 30px;
  text-align: right;
}

button {
  width: 45px;
  height: 35px;
  margin: 2px;
}
</style>
</head>

<body>

<input type="text" id="schermo" disabled><br>

<button onclick="add('7')">7</button>
<button onclick="add('8')">8</button>
<button onclick="add('9')">9</button>
<button onclick="add('/')">/</button><br>

<button onclick="add('4')">4</button>
<button onclick="add('5')">5</button>
<button onclick="add('6')">6</button>
<button onclick="add('*')">*</button><br>

<button onclick="add('1')">1</button>
<button onclick="add('2')">2</button>
<button onclick="add('3')">3</button>
<button onclick="add('-')">-</button><br>

<button onclick="add('0')">0</button>
<button onclick="add('.')">.</button>
<button onclick="uguale()">=</button>
<button onclick="add('+')">+</button><br>

<button onclick="pot()">x²</button>
<button onclick="rad()">√</button>
<button onclick="perc()">%</button>
<button onclick="c()">C</button><br>

<button onclick="sin()">sin</button>
<button onclick="cos()">cos</button>
<button onclick="tan()">tan</button>

<script>
let mem = [];

function add(v) {
  mem.push(v);
  schermo.value += v;
}

function c() {
  mem = [];
  schermo.value = "";
}

function leggiNumero() {
  let n = "";
  for (let i = 0; i < mem.length; i++) {
    n += mem[i];
  }
  mem = [];
  return parseFloat(n);
}

function pot() {
  let n = leggiNumero();
  schermo.value = Math.pow(n, 2);
}

function rad() {
  let n = leggiNumero();
  schermo.value = Math.sqrt(n);
}

function perc() {
  let n = leggiNumero();
  schermo.value = n / 100;
}

function sin() {
  let n = leggiNumero();
  schermo.value = Math.sin(n);
}

function cos() {
  let n = leggiNumero();
  schermo.value = Math.cos(n);
}

function tan() {
  let n = leggiNumero();
  schermo.value = Math.tan(n);
}

function uguale() {
  let arr = [];
  let num = "";

  for (let i = 0; i < mem.length; i++) {
    if (!isNaN(mem[i]) || mem[i] == ".") {
      num += mem[i];
    } else {
      arr.push(parseFloat(num));
      arr.push(mem[i]);
      num = "";
    }
  }

  if (num != "") arr.push(parseFloat(num));

  for (let i = 0; i < arr.length; i++) {
    if (arr[i] == "*" || arr[i] == "/") {
      let r = arr[i] == "*" ? arr[i-1] * arr[i+1] : arr[i-1] / arr[i+1];
      arr.splice(i-1, 3, r);
      i--;
    }
  }

  let ris = arr[0];
  for (let i = 1; i < arr.length; i += 2) {
    if (arr[i] == "+") ris += arr[i+1];
    if (arr[i] == "-") ris -= arr[i+1];
  }

  schermo.value = ris;
  mem = [];
}
</script>

</body>
</html>
